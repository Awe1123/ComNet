# 3.2.1 UDP概述

UDP只在网络层的IP数据报通讯服务之上增加了很少一点功能：

- 多路复用与分解
- 差错检测

虽然 UDP 用户数据报只能提供不可靠的交付, 但 UDP 在某些方面有其特殊的优点。

## UDP的主要特点

(1) UDP 是无连接的, 发送数据之前不需要建立连接, 因此减少了开销和发送数据之前的时延。
(2) UDP 使用尽最大努力交付, 即不保证可靠交付, 因 此主机不需要维持复杂的连接状态表。
(3) UDP 是面向报文的。UDP 对应用层交下来的报文， 既不合并, 也不拆分, 而是保留这些报文的边界。 UDP 一次交付一个完整的报文。
(4) UDP 没有拥塞控制, 因此网络出现的拥塞不会使源 主机的发送速率降低。这对某些实时应用是很重要的。 很适合多媒体通信（音/视频通信）的要求。

(5) UDP 支持单播和多播通信。实际上, UDP 支持一对一、一对多、多对一和多对多的交互 通信。
(6) UDP 的首部开销小, 只有 8 个字节, 比 TCP 的 20 个字节的首部要短。

## 面向报文的UDP

发送方 UDP对应用程序交下来的报文, 添加首 部后就向下交付网络层(IP层)。UDP 对应用层 交下来的报文, 既不合并, 也不拆分, 而是保 留这些报文的首尾边恩。
应用层交给 UDP 多长的报文, UDP 就照样发 送，即一次发送一个报文。
接收方 UDP 对 IP 层交上来的 UDP 用户数据报 在去除首部后就原封不动地交付上层的应用进 程, 一次交付一个完整的报文。

![image-20221019082406922](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20221019082406922.png)

## UDP长度的选择

利用UDP传输数据时, 应用程序必须选择合适 大小的报文。
■ 若报文太长, UDP 把它交给 IP 层后, IP 层在传送 时可能要进行分片, 这会降低 IP 层的效率。
■ 若报文太短, UDP 把它交给 IP 层后, 会使 IP 数据 报的首部的相对长度太大, 这也降低了 IP 层的效率
UDP适合传输相对较短的报文或数据块（比如 几百字节）!